(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{107:function(t,e,n){},110:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(22),u=n.n(a),i=(n(62),n(5)),s=n(37),o=n.n(s),b=n(7),j=n(18),l=n(28),d=n.n(l),f=n(14),h=n(1),O=function(){var t=Object(b.c)(f.b);return Object(h.jsxs)("nav",{children:[Object(h.jsx)(j.b,{exact:!0,to:"/",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Home"}),t&&Object(h.jsx)(j.b,{exact:!0,to:"/contacts",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Phonebook"}),Object(h.jsx)("hr",{})]})},v=n(24),p=n.n(v);function x(){return Object(h.jsxs)("div",{className:p.a.nav__container,children:[Object(h.jsx)(j.b,{to:"/signup",className:p.a.navLink,activeClassName:p.a.activeLink,children:"SignUp"}),Object(h.jsx)(j.b,{to:"/login",className:p.a.navLink,activeClassName:p.a.activeLink,children:"LogIn"})]})}var g=n(34),k=n.n(g),_=n(19);function m(){var t=Object(b.b)(),e=Object(b.c)(f.c);return Object(h.jsxs)("div",{className:k.a.user__container,children:[Object(h.jsxs)("span",{className:k.a.greeting__title,children:["Welcome, ",e,"!"]}),Object(h.jsx)("button",{type:"button",className:k.a.logout__btn,onClick:function(){return t(Object(_.c)())},children:"LogOut"})]})}var L=n(53),y=n.n(L);function N(){var t=Object(b.c)(f.b);return Object(h.jsxs)("header",{className:y.a.header__style,children:[Object(h.jsx)(O,{}),t?Object(h.jsx)(m,{}):Object(h.jsx)(x,{})]})}var w=function(t){var e=t.children;return Object(h.jsx)("div",{children:e})},C=n(27),I=(n(106),n(107),n(23)),U=n(33),S=["children","restricted","redirectTo"];function W(t){var e=t.children,n=(t.restricted,t.redirectTo),c=void 0===n?"/":n,r=Object(U.a)(t,S),a=Object(b.c)(f.b);return Object(h.jsx)(i.b,Object(I.a)(Object(I.a)({},r),{},{children:a?e:Object(h.jsx)(i.a,{to:c})}))}var z=["children","restricted"];function A(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=Object(U.a)(t,z),a=Object(b.c)(f.b)&&c;return Object(h.jsx)(i.b,Object(I.a)(Object(I.a)({},r),{},{children:a?Object(h.jsx)(i.a,{to:"/"}):e}))}var R=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,119))})),V=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,120))})),E=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,121))})),F=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,115))}));function M(){var t=Object(b.b)(),e=Object(b.c)(f.a);return Object(c.useEffect)((function(){t(Object(_.a)())}),[t]),e?Object(h.jsxs)("div",{className:"Container",children:[Object(h.jsx)(N,{}),Object(h.jsx)(w,{children:Object(h.jsx)(c.Suspense,{fallback:Object(h.jsx)(o.a,{}),children:Object(h.jsxs)(i.d,{children:[Object(h.jsx)(A,{exact:!0,path:"/",children:Object(h.jsx)(R,{})}),Object(h.jsx)(W,{path:"/contacts",redirectTo:"/login",children:Object(h.jsx)(F,{})}),Object(h.jsx)(A,{exact:!0,path:"/signup",restricted:!0,children:Object(h.jsx)(V,{})}),Object(h.jsx)(A,{exact:!0,path:"/login",restricted:!0,children:Object(h.jsx)(E,{})})]})})}),Object(h.jsx)(C.a,{})]}):Object(h.jsx)(o.a,{})}var T,q,B=n(8),J=n(4),P=n(6),X=n(57),G=n(29),H=n(40),K=Object(J.d)([],(T={},Object(P.a)(T,G.b.fulfilled,(function(t,e){return e.payload})),Object(P.a)(T,G.a.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(X.a)(t),[n])})),Object(P.a)(T,G.c.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),T)),Y=Object(J.d)("",Object(P.a)({},H.a,(function(t,e){return e.payload}))),D=n(17),Q=Object(J.e)({name:"auth",initialState:{user:{name:"",email:""},token:"",isLoggedIn:!1,isFetchCurrentUser:!1,error:null},extraReducers:(q={},Object(P.a)(q,_.d.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(P.a)(q,_.b.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(P.a)(q,_.c.fulfilled,(function(t,e){t.user={name:"",email:""},t.token="",t.isLoggedIn=!1})),Object(P.a)(q,_.a.pending,(function(t){t.isFetchCurrentUser=!0})),Object(P.a)(q,_.a.fulfilled,(function(t,e){var n=e.payload;t.user=n,t.isLoggedIn=!0})),Object(P.a)(q,_.a.rejected,(function(t){t.isFetchCurrentUser=!1})),Object(P.a)(q,D.c,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(P.a)(q,D.a,(function(t,e){var n=e.payload;t.error=n.message})),Object(P.a)(q,D.f,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(P.a)(q,D.d,(function(t,e){var n=e.payload;t.error=n.message})),q)}).reducer,Z=n(54),$=n.n(Z),tt=n(20),et=n(55),nt={key:"auth",storage:n.n(et).a,whitelist:["token"]},ct=Object(B.b)({contactList:K,contactFilter:Y}),rt=Object(J.a)({reducer:{auth:Object(tt.g)(nt,Q),contacts:ct},middleware:function(t){return t({serializableCheck:{ignoredActions:[tt.a,tt.f,tt.b,tt.c,tt.d,tt.e]}}).concat($.a)}}),at=Object(tt.h)(rt),ut=n(56);u.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(b.a,{store:rt,children:Object(h.jsx)(ut.a,{persistor:at,loading:null,children:Object(h.jsx)(j.a,{children:Object(h.jsx)(M,{})})})})}),document.getElementById("root"))},14:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var c=function(t){return t.auth.isLoggedIn},r=function(t){return t.auth.user.name},a=function(t){return t.auth.isFetchCurrentUser}},17:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return o}));var c=n(4),r=Object(c.b)("auth/loginRequest"),a=Object(c.b)("auth/loginSuccess"),u=Object(c.b)("auth/loginError"),i=Object(c.b)("auth/registerRequest"),s=Object(c.b)("auth/registerSuccess"),o=Object(c.b)("auth/registerError")},19:function(t,e,n){"use strict";n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return O})),n.d(e,"a",(function(){return v}));var c=n(15),r=n.n(c),a=n(21),u=n(16),i=n.n(u),s=n(4),o=n(17),b=n(27),j="https://connections-api.herokuapp.com",l=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){i.a.defaults.headers.common.Authorization=""},f=function(t){return function(e){e(Object(o.e)()),i.a.post("".concat(j,"/users/signup"),t).then((function(t){l(t.data.token),e(Object(o.f)(t.data))})).catch((function(t){e(Object(o.d)(t.message)),b.b.info(t.message)}))}},h=function(t){return function(e){e(Object(o.b)()),i.a.post("".concat(j,"/users/login"),t).then((function(t){l(t.data.token),e(Object(o.c)(t.data))})).catch((function(t){e(Object(o.a)(t.message)),b.b.info(t.message)}))}},O=Object(s.c)("auth/logout",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("".concat(j,"/users/logout"));case 4:d(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),c(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),v=Object(s.c)("auth/refresh",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,u,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),""!==(a=c.auth.token)){t.next=5;break}return console.log("No token"),t.abrupt("return",n.rejectWithValue());case 5:return l(a),t.prev=6,t.next=9,i.a.get("/users/current");case 9:return u=t.sent,s=u.data,t.abrupt("return",s);case 14:t.prev=14,t.t0=t.catch(6),n.rejectWithValue(t.t0);case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}())},24:function(t,e,n){t.exports={navLink:"AuthNav_navLink__2cXU3",activeNavLink:"AuthNav_activeNavLink__1e8CC",nav__container:"AuthNav_nav__container__1WqRx"}},28:function(t,e,n){t.exports={navLink:"Navigation_navLink__1lTx2",activeNavLink:"Navigation_activeNavLink__Lpu4R"}},29:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return j}));var c=n(15),r=n.n(c),a=n(21),u=n(16),i=n.n(u),s=n(4);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=Object(s.c)("contacts/addContacts",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/contacts",e);case 4:return a=t.sent,u=a.data,t.abrupt("return",u);case 9:t.prev=9,t.t0=t.catch(1),c(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),b=Object(s.c)("contacts/fetchContacts",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c,a,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,i.a.get("/contacts");case 4:return a=t.sent,u=a.data,t.abrupt("return",u);case 9:t.prev=9,t.t0=t.catch(1),c(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(s.c)("contacts/removeContact",function(){var t=Object(a.a)(r.a.mark((function t(e,n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,i.a.delete("/contacts/".concat(e));case 4:if(200!==t.sent.status){t.next=9;break}return t.abrupt("return",e);case 9:throw new Error({message:"error"});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}())},34:function(t,e,n){t.exports={user__container:"UserMenu_user__container__KxyPb",logout__btn:"UserMenu_logout__btn__1eMOt"}},40:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var c=n(4),r=Object(c.b)("contact/filter")},53:function(t,e,n){t.exports={header__style:"AppBar_header__style__YaSGX"}},62:function(t,e,n){}},[[110,4,6]]]);
//# sourceMappingURL=main.e995989c.chunk.js.map